<% if family.visits.empty? %>
  <p>Não há visitas registradas para esta família</p>
<% else %>
  <h6 class="text-lg font-bold">Visitas da família</h6>
  <% total_visits = family.visits.count %>
  <% visits_data = family.visits.order(visit_date: :desc).each_with_index.map do |visit, index|
      [
        { header: 'Nº', content: total_visits - index, id: "visit-number-#{visit.id}" },
        { header: 'Data da Visita', content: I18n.l(visit.visit_date, format: '%A, %d de %B de %Y'), id: "visit-date-#{visit.id}" },
        { header: 'Projeto', content: visit&.visited_project&.project&.name, id: "visit-project-#{visit.id}" },
        { header: 'Região', content: visit&.visited_project&.region&.name, id: "visit-region-#{visit.id}" }
        # Add more fields as needed
      ]
    end %>
  
  <%= data_table(visits_data) %>
<% end %>
